{% extends "base.html" %}
{% load slice from shop %}
{% load staticfiles %}
{% load build_absolute_uri from urls %}

{% block footer_scripts %}
  {{ block.super }}
  {% render_bundle 'category' 'js' %}
{% endblock footer_scripts %}

{% block title %}{{ category }} â€” {{ block.super }}{% endblock %}

{% block meta_tags %}
    <meta property="og:title" content="{{ category }}">
    <meta property="og:description" content="{{ category.description }}">
    <meta property="og:image" content="{% static "images/block1.png" %}">

    {% build_absolute_uri request=request location=category.get_absolute_url as category_url %}
    <meta property="og:url" content="{{ category_url }}">
    <link rel="canonical" href="{{ category_url }}?page={{ products_paginated.number }}">

    {% if products_paginated.has_previous %}
      <link rel="prev" href="{{ category_url }}?page={{ products_paginated.previous_page_number }}">
    {% endif %}

    {% if products_paginated.has_next %}
      <link rel="next" href="{{ category_url }}?page={{ products_paginated.next_page_number }}">
    {% endif %}
{% endblock meta_tags %}

{% block breadcrumb %}
    {{ block.super }}
    {% for breadcrumb in breadcrumbs %}
        <li{% if forloop.last %} class="active"{% endif %}>
            {% if not forloop.last %}
                <a href="{{ breadcrumb.get_absolute_url }}">{{ breadcrumb }}</a>
            {% else %}
                <span>{{ breadcrumb }}</span>
            {% endif %}
        </li>
    {% endfor %}
{% endblock breadcrumb %}

{% block content %}
    {% comment %} NOTE: This implementation of category page uses React for rendering the product list. See saleor/static/js/category.js file. {% endcomment %}
    {% csrf_token %}
    <div id="category-page" data-category='{"id":{{category.id}}}'></div>
{% endblock content %}
